<div class="p-6 space-y-6">
  <div>
    <h1 class="text-2xl font-bold text-gray-800">Dashboard</h1>
  </div>

  <ng-container *ngIf="currentRole === 'USER_ADMIN'">
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
      <div
        class="rounded-xl shadow p-4 bg-gradient-to-r from-indigo-500 to-purple-500 text-white flex flex-col justify-between"
      >
        <span class="text-sm font-medium opacity-80">Total Sales Orders</span>
        <span class="text-2xl font-bold">{{ totalSalesOrders }}</span>
      </div>

      <div
        class="rounded-xl shadow p-4 bg-gradient-to-r from-green-400 to-emerald-500 text-white flex flex-col justify-between"
      >
        <span class="text-sm font-medium opacity-80">Monthly Income</span>
        <span class="text-2xl font-bold">${{ totalIncome }}</span>
      </div>

      <div
        class="rounded-xl shadow p-4 bg-gradient-to-r from-pink-400 to-rose-500 text-white flex flex-col justify-between"
      >
        <span class="text-sm font-medium opacity-80">Total Contacts</span>
        <span class="text-2xl font-bold">{{ totalContacts }}</span>
      </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <div class="h-[260px] rounded-xl shadow p-4 bg-white">
        <div class="flex justify-between">
          <span class="font-medium text-gray-700">Sales Orders</span>
          <span class="opacity-60 text-sm">Latest</span>
        </div>
        <div class="mt-4 space-y-3">
          <div
            *ngFor="let salesOrder of listSalesOrders.slice(0, 3)"
            class="flex flex-row items-center gap-4 p-2 rounded-lg hover:bg-indigo-50 border-l-4 border-indigo-500"
          >
            <div
              class="w-10 h-10 bg-indigo-100 flex items-center justify-center rounded-full text-indigo-600 font-bold"
            >
              {{ salesOrder.subject.charAt(0) }}
            </div>
            <div class="flex flex-col">
              <span class="font-medium text-sm">{{ salesOrder.subject }}</span>
              <span class="opacity-60 text-sm">{{
                salesOrder.order_number
              }}</span>
            </div>
          </div>
        </div>
      </div>

      <div class="h-[260px] rounded-xl shadow p-4 bg-white">
        <div class="flex justify-between">
          <span class="font-medium text-gray-700">Contacts</span>
          <span class="opacity-60 text-sm">Latest</span>
        </div>
        <div class="mt-4 space-y-3">
          <div
            *ngFor="let contact of listContacts.slice(0, 3)"
            class="flex flex-row items-center gap-4 p-2 rounded-lg hover:bg-green-50 border-l-4 border-green-500"
          >
            <div
              class="w-10 h-10 bg-green-100 flex items-center justify-center rounded-full text-green-600 font-bold"
            >
              {{ contact.contact_name.charAt(0) }}
            </div>
            <div class="flex flex-col">
              <span class="font-medium text-sm">{{
                contact.contact_name
              }}</span>
              <span class="opacity-60 text-sm">{{ contact.email }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 p-4">
      <div class="bg-white rounded-lg shadow p-4">
        <h2 class="text-lg font-semibold mb-4">Customer Source</h2>
        <canvas
          baseChart
          [data]="contactSourceChartData"
          [type]="'bar'"
          [options]="chartOptions"
          (chartClick)="onContactSourceClick($event)"
        >
        </canvas>
      </div>

      <div class="bg-white rounded-lg shadow p-4">
        <h2 class="text-lg font-semibold mb-4">Sales Order Status</h2>
        <canvas
          baseChart
          [data]="salesStatusChartData"
          [type]="'bar'"
          [options]="chartOptions"
          (chartClick)="onSalesStatusClick($event)"
        >
        </canvas>
      </div>
    </div>
  </ng-container>

  <ng-container *ngIf="isSalesRole() && currentRole !== 'USER_ADMIN'">
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
      <div
        class="rounded-xl shadow p-4 bg-gradient-to-r from-indigo-500 to-purple-500 text-white flex flex-col justify-between"
      >
        <span class="text-sm font-medium opacity-80">Total Sales Orders</span>
        <span class="text-2xl font-bold">{{ totalSalesOrders }}</span>
      </div>

      <div
        class="rounded-xl shadow p-4 bg-gradient-to-r from-green-400 to-emerald-500 text-white flex flex-col justify-between"
      >
        <span class="text-sm font-medium opacity-80">Monthly Income</span>
        <span class="text-2xl font-bold">${{ totalIncome }}</span>
      </div>
    </div>

    <div class="h-[260px] rounded-xl shadow p-4 bg-white mt-6">
      <div class="flex justify-between">
        <span class="font-medium text-gray-700">Sales Orders</span>
        <span class="opacity-60 text-sm">Latest</span>
      </div>
      <div class="mt-4 space-y-3">
        <div
          *ngFor="let salesOrder of listSalesOrders.slice(0, 3)"
          class="flex flex-row items-center gap-4 p-2 rounded-lg hover:bg-indigo-50 border-l-4 border-indigo-500"
        >
          <div
            class="w-10 h-10 bg-indigo-100 flex items-center justify-center rounded-full text-indigo-600 font-bold"
          >
            {{ salesOrder.subject.charAt(0) }}
          </div>
          <div class="flex flex-col">
            <span class="font-medium text-sm">{{ salesOrder.subject }}</span>
            <span class="opacity-60 text-sm">{{
              salesOrder.order_number
            }}</span>
          </div>
        </div>
      </div>
    </div>

    <div class="bg-white rounded-lg shadow p-4 mt-6">
      <h2 class="text-lg font-semibold mb-4">Sales Order Status</h2>
      <canvas
        baseChart
        [data]="salesStatusChartData"
        [type]="'bar'"
        [options]="chartOptions"
        (chartClick)="onSalesStatusClick($event)"
      >
      </canvas>
    </div>
  </ng-container>

  <ng-container *ngIf="isContactRole() && currentRole !== 'USER_ADMIN'">
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
      <div
        class="rounded-xl shadow p-4 bg-gradient-to-r from-pink-400 to-rose-500 text-white flex flex-col justify-between"
      >
        <span class="text-sm font-medium opacity-80">Total Contacts</span>
        <span class="text-2xl font-bold">{{ totalContacts }}</span>
      </div>

      <div
        class="rounded-xl shadow p-4 bg-gradient-to-r from-green-400 to-emerald-500 text-white flex flex-col justify-between"
      >
        <span class="text-sm font-medium opacity-80">Monthly Income</span>
        <span class="text-2xl font-bold">${{ totalIncome }}</span>
      </div>
    </div>

    <div class="h-[260px] rounded-xl shadow p-4 bg-white mt-6">
      <div class="flex justify-between">
        <span class="font-medium text-gray-700">Contacts</span>
        <span class="opacity-60 text-sm">Latest</span>
      </div>
      <div class="mt-4 space-y-3">
        <div
          *ngFor="let contact of listContacts.slice(0, 3)"
          class="flex flex-row items-center gap-4 p-2 rounded-lg hover:bg-green-50 border-l-4 border-green-500"
        >
          <div
            class="w-10 h-10 bg-green-100 flex items-center justify-center rounded-full text-green-600 font-bold"
          >
            {{ contact.contact_name.charAt(0) }}
          </div>
          <div class="flex flex-col">
            <span class="font-medium text-sm">{{ contact.contact_name }}</span>
            <span class="opacity-60 text-sm">{{ contact.email }}</span>
          </div>
        </div>
      </div>
    </div>

    <div class="bg-white rounded-lg shadow p-4 mt-6">
      <h2 class="text-lg font-semibold mb-4">Customer Source</h2>
      <canvas
        baseChart
        [data]="contactSourceChartData"
        [type]="'bar'"
        [options]="chartOptions"
        (chartClick)="onContactSourceClick($event)"
      >
      </canvas>
    </div>
  </ng-container>
</div>
