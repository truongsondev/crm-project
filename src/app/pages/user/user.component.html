<div class="mt-6 mx-4 md:mx-10 bg-white p-4 md:p-6 rounded-lg shadow">
  <div class="flex flex-col gap-6">
    <div class="flex flex-col md:flex-row md:items-center gap-4">
      <h1 class="font-semibold text-2xl md:text-4xl">
        {{ "USER.TITLE" | translate }}
      </h1>
      <button-component
        [textBt]="'USER.BUTTON.ADD_USER' | translate"
        [textIcon]="'add'"
        [className]="'bg-primary text-white'"
        (click)="openDialog()"
      />
    </div>
    <h1 class="font-medium text-xl">{{ "USER.SUB_TITLE" | translate }}</h1>
    <div
      class="flex flex-col md:flex-row md:items-center md:justify-between gap-4"
    >
      <search-component
        (search)="onSearch($event)"
        [titleSearch]="mySearch"
      ></search-component>

      <div class="flex flex-row gap-2 items-center">
        <button-component
          [textBt]="'BUTTON.FILTER' | translate"
          [textIcon]="'filter_list'"
          [className]="'bg-emerald-400 text-white'"
          (click)="openFilterModal()"
        />
        <button-component
          [textBt]="'BUTTON.DOWNLOAD' | translate"
          [textIcon]="'cloud_download'"
          [className]="'bg-emerald-400 text-white'"
          (click)="exportToFileCSV()"
        />
        <button-component
          [textBt]="''"
          [textIcon]="'replay'"
          [className]="'bg-emerald-400 text-white'"
          (click)="getListUser()"
        />
      </div>
    </div>
    <h1
      *ngIf="userList && userList.length > 0"
      class="opacity-90 text-2xl md:text-sm"
    >
      Showing
      {{ pageIndex * pageSize + 1 }}
      -
      {{ Math.min((pageIndex + 1) * pageSize, dataSource.data.length) }}
      of
      {{ dataSource.data.length }}
      records
    </h1>

    <div class="overflow-auto">
      <table mat-table [dataSource]="dataSource" matSort class="">
        <ng-container
          *ngFor="let col of columnDefs"
          [matColumnDef]="col.column"
        >
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            {{ col.label }}
          </th>
          <td mat-cell *matCellDef="let row">
            <ng-container [ngSwitch]="col.column">
              <span class="text-primary cursor-pointer" *ngSwitchCase="'action'"
                ><button
                  (click)="onRowClick(row)"
                  class="w-8 h-8 flex items-center justify-center rounded-full bg-blue-100 text-blue-600 hover:bg-blue-200 transition cursor-pointer"
                >
                  <i class="material-icons text-lg">edit</i>
                </button></span
              >
              <span *ngSwitchCase="'employee'">
                {{ row["first_name"] }} {{ row["last_name"] }}
              </span>
              <span *ngSwitchCase="'role'">
                {{ getDisplayRole(row.role) }}
              </span>

              <span *ngSwitchCase="'manager_name'">
                {{ row["manager_name"]?.name || "-" }}
              </span>
              <span
                *ngSwitchCase="'is_active'"
                [ngClass]="{
                  'px-3 py-1 rounded-[9999px]  text-sm font-medium rounded-full': true,
                  'text-green-500 bg-green-100': row.is_active,
                  'text-red-500 bg-red-100': !row.is_active,
                }"
              >
                {{ row.is_active ? "Active" : "Inactive" }}
              </span>
              <span *ngSwitchDefault>
                {{ row[col.column] || "-" }}
              </span>
            </ng-container>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

        <tr class="mat-row no-data-row" *matNoDataRow>
          <td class="mat-cell" colspan="10">NO RECORDS FOUND</td>
        </tr>
      </table>
      <mat-paginator
        [hidden]="dataSource.data.length === 0"
        [pageSizeOptions]="[pageSize]"
        showFirstLastButtons
        (page)="onPageChange($event)"
      ></mat-paginator>
    </div>
  </div>
</div>
